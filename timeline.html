<html>
<head>

<meta charset="UTF-8">

<title>Baseball Timeline</title>


<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>
<script src="https://skeate.dev/Leaflet.timeline/examples/leaflet.timeline.js"></script>
<script src="leaflet.textpath.js"></script>
<script src="L.Control.Layers.Tree.js"></script>

<link rel="stylesheet" href="L.Control.Layers.Tree.css"/>


<script src="greatcentralleague1994.geojson" type="text/javascript"></script>
<script src="westernleague1893.geojson" type="text/javascript"></script>
<script src="unionassociation1884.geojson" type="text/javascript"></script>
<script src="midamericaleague1995.geojson" type="text/javascript"></script>
<script src="northcentralleague19941995.geojson" type="text/javascript"></script>
<script src="prairieleague19951997.geojson" type="text/javascript"></script>
<script src="heartlandleague19961998.geojson" type="text/javascript"></script>
<script src="bigsouthleague19961997.geojson" type="text/javascript"></script>
<script src="atlanticcoastleague1995.geojson" type="text/javascript"></script>
<script src="northatlanticleague19951996.geojson" type="text/javascript"></script>
<script src="northwoodsleague1994now.geojson" type="text/javascript"></script>
<script src="northernleague19932010.geojson" type="text/javascript"></script>
<script src="allamericanassociation2001.geojson" type="text/javascript"></script>
<script src="frontierleague1993now.geojson" type="text/javascript"></script>
<script src="southcoastleague2007.geojson" type="text/javascript"></script>
<script src="majorleagues/nationalleague1876now.geojson" type="text/javascript"></script>
<script src="majorleagues/bravestest.json" type="text/javascript"></script>
<script src="majorleagues/americanleague1901now.geojson" type="text/javascript"></script>
<script src="notableBirths.geojson" type="text/javascript"></script>
<script src="majorleagues/NLandALteams.json" type="text/javascript"></script>
<script src="minorleagues/westernleague1894.json" type="text/javascript"></script>
<script src="minorleagues/pacificcoastleague.json" type="text/javascript"></script>
<script src="minorleagues/alabamatennesseeleague.json" type="text/javascript"></script>
<script src="minorleagues/midwestleague.json" type="text/javascript"></script> 
<script src="minorleagues/internationalleague.json" type="text/javascript"></script> 
<script src="majorleagues/playersleague.json" type="text/javascript"></script>
<script src="majorleagues/americanassociation.json" type="text/javascript"></script>
<script src="minorleagues/centralleague.json" type="text/javascript"></script> 
<script src="minorleagues/carolinaleague.json" type="text/javascript"></script> 
<script src="minorleagues/southatlanticleague.json" type="text/javascript"></script> 
<script src="minorleagues/appalachianleague.json" type="text/javascript"></script> 
<script src="minorleagues/californialeague.json" type="text/javascript"></script> 
<script src="minorleagues/threeileague.json" type="text/javascript"></script> 
<script src="minorleagues/americanassociation.json" type="text/javascript"></script> 
<script src="minorleagues/westernleague.json" type="text/javascript"></script> 

<script src="indyleagues/northcentralleague.json" type="text/javascript"></script> 
<script src="indyleagues/greatcentralleague.json" type="text/javascript"></script> 
<script src="indyleagues/midamericaleague.json" type="text/javascript"></script> 
<script src="indyleagues/prairieleague.json" type="text/javascript"></script> 
<script src="indyleagues/bigsouthleague.json" type="text/javascript"></script> 
<script src="indyleagues/northatlanticleague.json" type="text/javascript"></script> 
<script src="indyleagues/heartlandleague.json" type="text/javascript"></script> 
<script src="indyleagues/texaslouisianaleague.json" type="text/javascript"></script> 
<script src="indyleagues/allamericanassociation.json" type="text/javascript"></script> 
<script src="indyleagues/northernleague.json" type="text/javascript"></script> 
<script src="indyleagues/southcoastleague.json" type="text/javascript"></script> 
<script src="indyleagues/westernbaseballleague.json" type="text/javascript"></script> 
<script src="indyleagues/unitedleaguebaseball.json" type="text/javascript"></script> 
<script src="indyleagues/goldenbaseballleague.json" type="text/javascript"></script>
<script src="indyleagues/northeastleague.json" type="text/javascript"></script>
<script src="indyleagues/atlanticleague.json" type="text/javascript"></script>
<script src="indyleagues/frontierleague.json" type="text/javascript"></script>
<script src="indyleagues/continentalbaseballleague.json" type="text/javascript"></script>

<script src="collegiatesummerleagues/northwoodsleague.json" type="text/javascript"></script>

<div id="map" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></div>
    <style>
      .leaflet-bottom.leaflet-left {
        width: 100%;
      }
      .leaflet-control-container .leaflet-timeline-controls {
        box-sizing: border-box;
        width: 100%;
        margin: 0;
        margin-bottom: 15px;
      }
    </style>
	


</head>



<body>

<script>

//creates the actual map
var map = L.map('map').setView([39.833333, -98.583333 ], 5);
//L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
//    maxZoom: 19,
//    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
//}).addTo(map);

var CartoDB_DarkMatter = L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
	attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
	subdomains: 'abcd',
	maxZoom: 17
});



var CartoDB_LightMatter = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
    maxZoom: 17,
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>'
});


CartoDB_LightMatter.addTo(map);

timelineControl = L.timelineSliderControl({
"start": Date.parse("1832-09-17"),
"end": Date.parse("2025-12-31"),
formatOutput: function (date) {
            return new Date(date+86400000).toLocaleDateString(); //this is a horrific hack
																 //date was off-by-one so I just added an amount of time to line it up
          },
duration: 500000
});



var ballmarkerIcon = L.Icon.extend({
    options: {
        shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
		iconSize: [25, 41],
		iconAnchor: [12, 41],
		popupAnchor: [1, -34],
		shadowSize: [41, 41]
    }
});

var greenIcon 			= new ballmarkerIcon({iconUrl: 'markericons/marker-icon-2x-green.png'}),
	redIcon 			= new ballmarkerIcon({iconUrl: 'markericons/marker-icon-2x-red.png'}),
	yellowIcon 			= new ballmarkerIcon({iconUrl: 'markericons/marker-icon-2x-yellow.png'}),
	blackIcon 			= new ballmarkerIcon({iconUrl: 'markericons/marker-icon-2x-black.png'}),
	blueIcon 			= new ballmarkerIcon({iconUrl: 'markericons/marker-icon-2x-blue.png'}),
	goldIcon 			= new ballmarkerIcon({iconUrl: 'markericons/marker-icon-2x-gold.png'}),
	greyIcon 			= new ballmarkerIcon({iconUrl: 'markericons/marker-icon-2x-grey.png'}),
	orangeIcon 			= new ballmarkerIcon({iconUrl: 'markericons/marker-icon-2x-orange.png'}),
	darkgreenIcon 		= new ballmarkerIcon({iconUrl: 'markericons/marker-icon-2x-darkgreen.png'}),
	aquamarineIcon 		= new ballmarkerIcon({iconUrl: 'markericons/marker-icon-2x-aquamarine.png'}),
	pinkIcon 			= new ballmarkerIcon({iconUrl: 'markericons/marker-icon-2x-pink.png'}),
	violetIcon 			= new ballmarkerIcon({iconUrl: 'markericons/marker-icon-2x-violet.png'});
	darkblueIcon 		= new ballmarkerIcon({iconUrl: 'markericons/marker-icon-2x-darkblue.png'});
	brownIcon 			= new ballmarkerIcon({iconUrl: 'markericons/marker-icon-2x-brown.png'});
	brightorangeIcon 	= new ballmarkerIcon({iconUrl: 'markericons/marker-icon-2x-brightorange.png'});
	hotpinkIcon		 	= new ballmarkerIcon({iconUrl: 'markericons/marker-icon-2x-hotpink.png'});

var defunctIcon		= new L.Icon({iconUrl: 'defunct1.png', iconAnchor: [15, 35]});
var birthIcon 		= new L.Icon({iconUrl: 'birthIcon.png'});
var exclamationIcon = new L.Icon({iconUrl: 'exclamation.png'});
var newleagueIcon 	= new L.Icon({iconUrl: 'newleague.png'});
var relocateIcon 	= new L.Icon({iconUrl: 'relocate.png'});
var rebrandIcon 	= new L.Icon({iconUrl: 'rebrand.png'});


var ALIcon = new L.Icon({
  iconUrl: 'markericons/ALIcon.png',
  shadowUrl: '',
  iconSize: [50, 50],
  iconAnchor: [25, 25],
  popupAnchor: [1, -34],
  shadowSize: [41, 41]
});

var NLIcon = new L.Icon({
  iconUrl: 'markericons/NLIcon.png',
  shadowUrl: '',
  iconSize: [50, 50],
  iconAnchor: [25, 25],
  popupAnchor: [1, -34],
  shadowSize: [41, 41]
});

var NorthwoodsIcon = new L.Icon({
  iconUrl: 'markericons/NorthwoodsIcon.png',
  shadowUrl: '',
  iconSize: [0, 0],
  iconAnchor: [25, 25],
  popupAnchor: [1, -34],
  shadowSize: [41, 41]
});




//these should always be camelcased! lowercase is the JSON objects
//major leagues
var NationalLeague 					= {"type": 'FeatureCollection', "features": []}
var AmericanLeague 					= {"type": 'FeatureCollection', "features": []}
var NationalAssociation 			= {"type": 'FeatureCollection', "features": []}
var AmericanAssociation				= {"type": 'FeatureCollection', "features": []}
var UnionAssociation				= {"type": 'FeatureCollection', "features": []}
var PlayersLeague 					= {"type": 'FeatureCollection', "features": []}
var FederalLeague					= {"type": 'FeatureCollection', "features": []}


//minor leagues

//extant AAA
var PacificCoastLeague				= {"type": 'FeatureCollection', "features": []}
var InternationalLeague				= {"type": 'FeatureCollection', "features": []}
//extant AA
var TexasLeague						= {"type": 'FeatureCollection', "features": []}
var EasternLeague					= {"type": 'FeatureCollection', "features": []}
//extant high-A 

var MidwestLeague					= {"type": 'FeatureCollection', "features": []}
//extant low-A
var CaliforniaLeague				= {"type": 'FeatureCollection', "features": []}
var CarolinaLeague					= {"type": 'FeatureCollection', "features": []}

//extant indy
var AppalachianLeague				= {"type": 'FeatureCollection', "features": []}
var AtlanticLeague					= {"type": 'FeatureCollection', "features": []}
var FrontierLeague					= {"type": 'FeatureCollection', "features": []}


//extant summer collegiate
var NorthwoodsLeague 				= {"type": 'FeatureCollection', "features": []}

//defunct Indy 
var NorthCentralLeague				= {"type": 'FeatureCollection', "features": []}
var GreatCentralLeague				= {"type": 'FeatureCollection', "features": []}
var MidAmericaLeague				= {"type": 'FeatureCollection', "features": []}
var PrairieLeague					= {"type": 'FeatureCollection', "features": []}
var BigSouthLeague					= {"type": 'FeatureCollection', "features": []}
var NorthAtlanticLeague				= {"type": 'FeatureCollection', "features": []}
var HeartlandLeague					= {"type": 'FeatureCollection', "features": []}
var TexasLouisianaLeague			= {"type": 'FeatureCollection', "features": []}
var CentralBaseballLeague			= {"type": 'FeatureCollection', "features": []}
var UnitedLeagueBaseball			= {"type": 'FeatureCollection', "features": []}
var NorthAmericanLeague				= {"type": 'FeatureCollection', "features": []}
var AllAmericanAssociation			= {"type": 'FeatureCollection', "features": []}
var SoutheasternLeague				= {"type": 'FeatureCollection', "features": []}
var NorthernLeague					= {"type": 'FeatureCollection', "features": []}
var SouthCoastLeague				= {"type": 'FeatureCollection', "features": []}
var WesternBaseballLeague			= {"type": 'FeatureCollection', "features": []}
var GoldenBaseballLeague			= {"type": 'FeatureCollection', "features": []}
var NortheastLeague 				= {"type": 'FeatureCollection', "features": []}
var CanAmLeague 					= {"type": 'FeatureCollection', "features": []}
var ContinentalBaseballLeague 		= {"type": 'FeatureCollection', "features": []}

//defunct
var WesternLeague					= {"type": 'FeatureCollection', "features": []}
var InternationalAssociation		= {"type": 'FeatureCollection', "features": []}
var LeagueAlliance					= {"type": 'FeatureCollection', "features": []}
var NationalBaseBallAssociation		= {"type": 'FeatureCollection', "features": []}
var InterstateAssociation			= {"type": 'FeatureCollection', "features": []}
var PacificCoastInternationalLeague	= {"type": 'FeatureCollection', "features": []}
var AlabamaTennesseeLeague			= {"type": 'FeatureCollection', "features": []}
var IllinoisIndianaIowaLeague		= {"type": 'FeatureCollection', "features": []}
var IllinoisStateLeague				= {"type": 'FeatureCollection', "features": []}
var MississippiOhioValleyLeague		= {"type": 'FeatureCollection', "features": []}
var SouthAtlanticLeague				= {"type": 'FeatureCollection', "features": []}
var NorthwesternLeague				= {"type": 'FeatureCollection', "features": []}
var CentralLeague					= {"type": 'FeatureCollection', "features": []}

var NoLeague						= {"type": 'FeatureCollection', "features": []}

function addGeoJSONTeamsToLeagues (geoJSONTeam, league) {
	switch (league) {
		case "Alabama-Tennessee League":		AlabamaTennesseeLeague.features.push(geoJSONTeam); 			break;				
		case "All-American Association":		AllAmericanAssociation.features.push(geoJSONTeam); 			break;			
		case "AmericanLeague": 					AmericanLeague.features.push(geoJSONTeam); 					break;
		case "American Association": 			AmericanAssociation.features.push(geoJSONTeam); 			break;
		case "Appalachian League": 				AppalachianLeague.features.push(geoJSONTeam); 				break;		
		case "Atlantic League": 				AtlanticLeague.features.push(geoJSONTeam); 					break;	
		case "Big South League": 				BigSouthLeague.features.push(geoJSONTeam); 					break;			
		case "California League":				CaliforniaLeague.features.push(geoJSONTeam); 				break;
		case "Can-Am League":					CanAmLeague.features.push(geoJSONTeam); 					break;
		case "Carolina League":					CarolinaLeague.features.push(geoJSONTeam); 					break;
		case "Central Baseball League":			CentralBaseballLeague.features.push(geoJSONTeam); 			break;
		case "Central League":					CentralLeague.features.push(geoJSONTeam); 					break;
		case "Continental Baseball League":		ContinentalBaseballLeague.features.push(geoJSONTeam); 		break;
		case "Eastern League": 					EasternLeague.features.push(geoJSONTeam); 					break;
		case "Frontier League": 				FrontierLeague.features.push(geoJSONTeam); 					break;
		case "Great Central League": 			GreatCentralLeague.features.push(geoJSONTeam); 				break;
		case "Golden Baseball League": 			GoldenBaseballLeague.features.push(geoJSONTeam); 			break;
		case "Heartland League": 				HeartlandLeague.features.push(geoJSONTeam); 				break;
		case "Illinois-Indiana-Iowa League": 	IllinoisIndianaIowaLeague.features.push(geoJSONTeam); 		break;
		case "Illinois State League": 			IllinoisStateLeague.features.push(geoJSONTeam); 			break;
		case "InternationalAssociation": 		InternationalAssociation.features.push(geoJSONTeam); 		break;
		case "International League": 			InternationalLeague.features.push(geoJSONTeam);				break;
		case "InterstateAssociation": 			InterstateAssociation.features.push(geoJSONTeam); 			break;	
		case "Mid-America League": 				MidAmericaLeague.features.push(geoJSONTeam); 				break;
		case "Midwest League": 					MidwestLeague.features.push(geoJSONTeam); 					break;	
		case "Mississippi-Ohio Valley League": 	MississippiOhioValleyLeague.features.push(geoJSONTeam); 	break;		
		case "NationalAssociation": 			NationalAssociation.features.push(geoJSONTeam); 			break;
		case "NationalLeague": 					NationalLeague.features.push(geoJSONTeam); 					break;
		case "North Atlantic League":			NorthAtlanticLeague.features.push(geoJSONTeam); 			break;	
		case "North American League":			NorthAmericanLeague.features.push(geoJSONTeam); 			break;
		case "Northern League":					NorthernLeague.features.push(geoJSONTeam); 					break;
		case "Northeast League":				NortheastLeague.features.push(geoJSONTeam); 				break;
		case "NorthwesternLeague":				NorthwesternLeague.features.push(geoJSONTeam); 				break;	
		case "Northwoods League":				NorthwoodsLeague.features.push(geoJSONTeam); 				break;
		case "North Central League":			NorthCentralLeague.features.push(geoJSONTeam); 				break;
		case "Pacific Coast League": 			PacificCoastLeague.features.push(geoJSONTeam); 				break;
		case "PacificCoastInternationalLeague":	PacificCoastInternationalLeague.features.push(geoJSONTeam); break;	
		case "Players League": 					PlayersLeague.features.push(geoJSONTeam);					break;
		case "Prairie League": 					PrairieLeague.features.push(geoJSONTeam); 					break;
		case "South Atlantic League":			SouthAtlanticLeague.features.push(geoJSONTeam); 			break;	
		case "South Coast League":				SouthCoastLeague.features.push(geoJSONTeam); 				break;	
		case "Southeastern League":				SoutheasternLeague.features.push(geoJSONTeam); 				break;
		case "Texas League":					TexasLeague.features.push(geoJSONTeam); 					break;		
		case "Texas-Louisiana League":			TexasLouisianaLeague.features.push(geoJSONTeam); 			break;
		case "United League Baseball":			UnitedLeagueBaseball.features.push(geoJSONTeam); 			break;
		case "Western Baseball League": 		WesternBaseballLeague.features.push(geoJSONTeam); 			break;			
		case "WesternLeague": 					WesternLeague.features.push(geoJSONTeam); 					break;		
		case "Western League": 					WesternLeague.features.push(geoJSONTeam); 					break;
		case "noLeague": 						NoLeague.features.push(geoJSONTeam); 						break;
		}}


function convertTeamToGeoJSON(team, nameArray, leagueArray, coordArray){ 
	let latlng 		= 	[coordArray[0][1], coordArray[0][0]];
	let nameStart 	= 	cleanDates(nameArray[1], 	"start");
	let nameEnd 	= 	cleanDates(nameArray[2], 	"end");
	let leagueStart =	cleanDates(leagueArray[1], 	"start");
	let leagueEnd 	= 	cleanDates(leagueArray[2], 	"end");
	let coordStart 	= 	cleanDates(coordArray[1], 	"start");
	let coordEnd 	= 	cleanDates(coordArray[2], 	"end");
	startTime		= 	Math.max(nameStart,leagueStart,coordStart);
	endTime 		= 	Math.min(nameEnd,leagueEnd,coordEnd);
	let geoJSONteam = { 
		"type": "Feature",
	    "properties": 	{"start": startTime, "end": endTime, "name": nameArray[0], "league": leagueArray[0]},
		"geometry" : 	{"coordinates" : latlng, "type": "Point"}} 
	addGeoJSONTeamsToLeagues(geoJSONteam, leagueArray[0]);
	return geoJSONteam;
}

function cleanDates (time, type) {
	if (type == "start") {
		if (time.length == 4) 
			{return Date.parse(time.concat("-01-01"))};
		return Date.parse(time)}
	if (type == "end") {
		if (time.length == 4) 
			{return Date.parse(time.concat("-12-31"))};
		if (time == "now") 
			{return Date.parse("2025-12-31")};
		return Date.parse(time) }
	else 	{return Date.parse(time)}}
	

function drawCoordMovingLines(latlon1, latlon2, time, league, nextleague, name){ //nextleague can be the same as league
	let movingLine = 	
		{ "type": "LineString",
	     "properties": {
			"start": time,
			"end": time,
			"decoration": "arrow"
			}, 
		"coordinates": [[latlon1[1], latlon1[0]],[latlon2[1], latlon2[0]]]
		}
	addGeoJSONTeamsToLeagues(movingLine, league);			//line goes with the departing league
	//let nameArray = [name, time, time]
	//let leagueArray = [nextleague, time, time]
	//let coordArray = [latlon2, time, time]
	//console.log(nameArray, leagueArray, coordArray);
	//convertTeamToGeoJSON("brett", nameArray, leagueArray, coordArray);
	let geoJSONteam = { 
		"type": "Feature",
	    "properties": 	{"start": time, "end": time, "name": name, "league": nextleague},
		"geometry" : 	{"coordinates" : [latlon2[1], latlon2[0]], "type": "Point"}} 
	//console.log(geoJSONteam, nextleague);
	addGeoJSONTeamsToLeagues(geoJSONteam, nextleague);		//but the extra marker goes with the joining league
}

function getDetailColor(colorIcon) {
			switch (colorIcon) {
				case ALIcon: 			return 	{color: "#404040"};
				case NLIcon: 			return 	{color: "#404040"};
				case NorthwoodsIcon: 	return 	{color: "#458F5C"};
				case redIcon: 			return 	{color: "#a32929"}; 
				case orangeIcon: 		return 	{color: "#F5A327"}; 
				case greenIcon: 		return 	{color: "#34D966"}; 
				case darkgreenIcon:	 	return 	{color: "#458F5C"}; 
				case goldIcon: 			return 	{color: "#F7D939"}; 
				case greyIcon: 			return 	{color: "#C4C4C4"}; 
				case blackIcon: 		return 	{color: "#404040"}; 
				case pinkIcon: 			return 	{color: "#ED6DB7"}; 
				case violetIcon: 		return 	{color: "#A55DF0"};
				case blueIcon: 			return 	{color: "#5D67F0"}; 
				case yellowIcon: 		return 	{color: "#E3DD4B"}; 
				case aquamarineIcon: 	return 	{color: "#65E0C9"}; }}


var blankStyle = {
    "color": "",
    "weight": 0,
    "opacity": 0
};


function getLeagueTimeline(team, ballIcon){
	teamTimeline = L.timeline(team, {
			style:  function (feature, layer) {;
				if (feature.geometry.properties.decoration == "leaguetext") {return blankStyle};
				return getDetailColor(ballIcon)
				}, 
				
				//blankStyle,
			onEachFeature: function (feature, layer) {
					if (feature.properties.decoration == "arrow") {
						layer.setText('► ', {repeat: true, offset: 4, attributes: {} })};
					if (feature.properties.decoration == "leaguetext") {
						layer.setText(feature.properties.league, {orientation: 180, center: true, attributes: { 'font-size': '35px', fill: "#34D966"} })} //get a Western League image and put it over the coords instead?
													},
				pointToLayer : function(feature, latlng) {
							if (feature.properties.marker) {
								return L.marker(latlng, {icon:feature.properties.marker}).setZIndexOffset(1000)}
														
							return L.marker(latlng, {icon:ballIcon}).bindPopup(feature.properties.name + "<br>" + feature.properties.league)}
							}		
							
							)
	if (ballIcon == NorthwoodsIcon) { //if the ballicon is this placeholder then give it the fancy update UI list thing
		return (teamTimeline).on('change', function() {rebuildLeagueUIList();}); }
	return (teamTimeline)
	}

function getRebuildLeagueUIListDateMarks () {
	for (let j = 1850; j < 2025; j++) {
		placeholderMarker = { "type": "Feature",
					"properties": 	{"start": cleanDates(j, "start"), "end": cleanDates(j, "end"), "name": "", marker: NorthwoodsIcon},
					"geometry" : 	{"coordinates" : [0, 0], "type": "Point"}}
					addGeoJSONTeamsToLeagues(placeholderMarker, "noLeague");
	}
}
getRebuildLeagueUIListDateMarks()




//make teams go defunct on december 30th?


function createEndMarker(endMarker, endCoords, endDate, endLeague){
	let geoJSONEndMarker = { 
		"type": "Feature",
	    "properties": 	{"start": endDate, "end": endDate, "name": "", marker: endMarker},
		"geometry" : 	{"coordinates" : [endCoords[0][1], endCoords[0][0]], "type": "Point"}}
	addGeoJSONTeamsToLeagues(geoJSONEndMarker, endLeague[0]);
	}




function loadTeams(teamFile){
	//console.log(teamFile);
	teamCount = teamFile.teams.length;
	teamIncrement = 0
	while (teamIncrement < teamCount) {
		currentTeam 	= 	teamFile.teams[teamIncrement];
		nameIncrement 	= 	0; 
		leagueIncrement = 	0;
		coordIncrement	=	0;
		nameCount 		= 	currentTeam.names.length;
		leagueCount		= 	currentTeam.leagues.length;
		coordCount 		= 	currentTeam.coords.length;
		while (	(nameIncrement 		< nameCount) 		&&  //while we're not on the last name 
				(leagueIncrement 	< leagueCount) 		&&  //AND not on the last league
				(coordIncrement 	< coordCount)		){	//AND not on the last coord for this team
			currentName 			= 	currentTeam.names[nameIncrement];
			currentLeague 			= 	currentTeam.leagues[leagueIncrement];
			currentCoord 			= 	currentTeam.coords[coordIncrement];
			currentNameEndTime		= 	cleanDates(currentName[2], 		"end");
			currentLeagueEndTime	= 	cleanDates(currentLeague[2], 	"end");
			currentCoordEndTime		= 	cleanDates(currentCoord[2], 	"end");
			convertedTeam 	= convertTeamToGeoJSON(currentTeam, currentName, currentLeague, currentCoord);
			if ((currentNameEndTime < currentLeagueEndTime) && 		//if NAME ends before LEAGUE and COORD
				(currentNameEndTime < currentCoordEndTime)) {
				nameIncrement 	= nameIncrement 	+ 1;
					continue;}
			if ((currentLeagueEndTime < currentNameEndTime) && 		//if LEAGUE ends before NAME and COORD	
				(currentLeagueEndTime < currentCoordEndTime)) {
				leagueIncrement = leagueIncrement 	+ 1;		
					continue;}
			if ((currentCoordEndTime < currentNameEndTime) && 		//if COORD ends before NAME and LEAGUE
				(currentCoordEndTime < currentLeagueEndTime)) {
				if (coordIncrement+1 != coordCount) {
					drawCoordMovingLines(	currentTeam.coords[coordIncrement][0],   	//currentcoord
											currentTeam.coords[coordIncrement+1][0], 	//coord of the next location
											currentCoordEndTime, 						//when the coord changes
											currentLeague[0], 							//current league (so we know which array to dump the line into)
											currentLeague[0],							//if the league is changing, the next league. (to generate the double point for a move) otherwise, current league
											currentName[0]);}
				coordIncrement 	= coordIncrement 	+ 1;		
					continue;}
			if ((currentLeagueEndTime < currentCoordEndTime) && 	//if NAME and LEAGUE end before COORD
				(currentNameEndTime == currentLeagueEndTime)) {
				nameIncrement 	= nameIncrement 	+ 1;	
				leagueIncrement = leagueIncrement 	+ 1;
					continue;}	
			if ((currentNameEndTime < currentLeagueEndTime) && 		//if NAME and COORD end before LEAGUE
				(currentCoordEndTime == currentNameEndTime)) {
				if (coordIncrement+1 != coordCount) {
					drawCoordMovingLines(	currentTeam.coords[coordIncrement][0], 
											currentTeam.coords[coordIncrement+1][0], 
											currentCoordEndTime, 
											currentLeague[0], 
											currentLeague[0],
											currentTeam.names[nameIncrement+1][0]);}
				coordIncrement 	= coordIncrement 	+ 1;	
				nameIncrement 	= nameIncrement 	+ 1;
					continue;}		
			if ((currentCoordEndTime < currentNameEndTime) && 		//if COORD and LEAGUE end before NAME
				(currentLeagueEndTime == currentCoordEndTime)) {
				if (coordIncrement+1 != coordCount) {
					drawCoordMovingLines(	currentTeam.coords[coordIncrement][0], 
											currentTeam.coords[coordIncrement+1][0], 
											currentCoordEndTime, 
											currentLeague[0], 
											currentTeam.leagues[leagueIncrement+1],
											currentName[0]);}
				coordIncrement 	= coordIncrement 	+ 1;	
				leagueIncrement = leagueIncrement 	+ 1;
					continue;}				
			if ((currentCoordEndTime == currentNameEndTime) && 		//if all end on same date
				(currentCoordEndTime == currentLeagueEndTime)) {
				if (coordIncrement+1 != coordCount) {				
					drawCoordMovingLines(	currentTeam.coords[coordIncrement][0], 
											currentTeam.coords[coordIncrement+1][0], 
											currentCoordEndTime, 
											currentLeague[0], 
											currentTeam.leagues[leagueIncrement+1][0],
											currentTeam.names[nameIncrement+1][0]);}
				if ((coordIncrement+1 == coordCount) && (currentCoord[2] != "now")) {
					//console.log("this if statement works");
					createEndMarker(defunctIcon, currentCoord, currentCoordEndTime, currentLeague)}
				coordIncrement 	= coordIncrement 	+ 1;	
				nameIncrement 	= nameIncrement 	+ 1;
				leagueIncrement = leagueIncrement 	+ 1;
					continue;}
			}
		teamIncrement = teamIncrement + 1;
		}
	
	

}	



loadTeams(NLandALteams);
loadTeams(westernleague1894);
loadTeams(westernleague);
loadTeams(pacificcoastleague);
loadTeams(alabamatennesseeleague);
loadTeams(midwestleague) //also contains the predecessor leagues Illinois State League and Mississippi-Ohio Valley League
loadTeams(internationalleague)
loadTeams(playersleague)
loadTeams(americanassociation)
loadTeams(centralleague);
loadTeams(northcentralleague);
loadTeams(greatcentralleague);
loadTeams(midamericaleague);
loadTeams(prairieleague);
loadTeams(bigsouthleague);
loadTeams(northatlanticleague);
loadTeams(heartlandleague);
loadTeams(texaslouisianaleague); //includes Central Baseball League
loadTeams(allamericanassociation); //includes Southeastern League
loadTeams(northernleague); //includes American Association (indy). 2 travel teams not represented
loadTeams(unitedleaguebaseball); //includes some North American League teams. some travel teams not represented
loadTeams(southcoastleague);
loadTeams(westernbaseballleague);
loadTeams(goldenbaseballleague); //includes some North American League teams. also, travel teams not included
loadTeams(atlanticleague);
loadTeams(americanassociationminor);
loadTeams(northwoodsleague);

//some code here to analyze the league arrays and make the map league names
//console.log(PlayersLeague);
loadTeams(californialeague);
loadTeams(carolinaleague);
loadTeams(southatlanticleague);
loadTeams(appalachianleague);
loadTeams(northeastleague); //also has the Can-Am League
loadTeams(threeileague);
loadTeams(frontierleague);
loadTeams(continentalbaseballleague);


var LeagueLayerTree = L.control.layers.tree(baseTree, overlaysTree1, null)

LeagueLayerTree.addTo(map);

leagueLayerArray = [
	[NationalLeagueLayer					= getLeagueTimeline(NationalLeague, NLIcon), "National League"],
	[AmericanLeagueLayer					= getLeagueTimeline(AmericanLeague, ALIcon), "American League"],


	[AppalachianLeagueLayer					= getLeagueTimeline(AppalachianLeague, pinkIcon), "Appalachian League"],
	[NorthwoodsLeagueLayer					= getLeagueTimeline(NorthwoodsLeague, darkgreenIcon), "Northwoods League"],

		
		
	[PacificCoastLeagueLayer				= getLeagueTimeline(PacificCoastLeague, greenIcon), "Pacific Coast League"],
	[InternationalLeagueLayer				= getLeagueTimeline(InternationalLeague, redIcon), "International League"],	

	[MidwestLeagueLayer 					= getLeagueTimeline(MidwestLeague, blueIcon), "Midwest League"],	
	[CaliforniaLeagueLayer 					= getLeagueTimeline(CaliforniaLeague, blueIcon), "California League"],	
	[CarolinaLeagueLayer 					= getLeagueTimeline(CarolinaLeague, brightorangeIcon), "Carolina League"],
	[SouthAtlanticLeagueLayer 				= getLeagueTimeline(SouthAtlanticLeague, violetIcon), "South Atlantic League"],


	[ThreeILeagueLayer 						= getLeagueTimeline(IllinoisIndianaIowaLeague, yellowIcon), "Three-I League"],
	[WesternLeagueLayer 					= getLeagueTimeline(WesternLeague, orangeIcon), "Western League"],
	[IllinoisStateLeagueLayer 				= getLeagueTimeline(IllinoisStateLeague, darkgreenIcon), "Illinois State League"],
	[MississippiOhioValleyLeagueLayer 		= getLeagueTimeline(MississippiOhioValleyLeague, greenIcon), "Mississippi-Ohio Valley League"],

	[AmericanAssociationLayer 				= getLeagueTimeline(AmericanAssociation, greyIcon), "American Association"],
	[FrontierLeagueLayer 					= getLeagueTimeline(FrontierLeague, goldIcon), "Frontier League"],
	[AtlanticLeagueLayer 					= getLeagueTimeline(AtlanticLeague, blackIcon), "Atlantic League"],
	[CanAmLeagueLayer 						= getLeagueTimeline(CanAmLeague, yellowIcon), "Can-Am League"],
	[NorthCentralLeagueLayer 				= getLeagueTimeline(NorthCentralLeague, blackIcon), "North Central League"],
	[GreatCentralLeagueLayer 				= getLeagueTimeline(GreatCentralLeague, yellowIcon), "Great Central League"],
	[MidAmericaLeagueLayer 					= getLeagueTimeline(MidAmericaLeague, brownIcon), "Mid-America League"],
	[PrairieLeagueLayer 					= getLeagueTimeline(PrairieLeague, orangeIcon), "Prairie League"],
	[BigSouthLeagueLayer 					= getLeagueTimeline(BigSouthLeague, aquamarineIcon), "Big South League"],
	[NorthAtlanticLeagueLayer 				= getLeagueTimeline(NorthAtlanticLeague, darkblueIcon), "North Atlantic League"],
	[HeartlandLeagueLayer 					= getLeagueTimeline(HeartlandLeague, orangeIcon), "Heartland League"],
	[TexasLouisianaLeagueLayer 				= getLeagueTimeline(TexasLouisianaLeague, orangeIcon), "Texas-Louisiana League"],
	[CentralBaseballLeagueLayer 			= getLeagueTimeline(CentralBaseballLeague, orangeIcon), "Central Baseball League"],
	[SoutheasternLeagueLayer 				= getLeagueTimeline(SoutheasternLeague, orangeIcon), "Southeastern League"],
	[AllAmericanAssociationLayer 			= getLeagueTimeline(AllAmericanAssociation, orangeIcon), "All-American Association League"],
	[NorthernLeagueLayer 					= getLeagueTimeline(NorthernLeague, darkblueIcon), "Northern League"],
	[SouthCoastLeagueLayer 					= getLeagueTimeline(SouthCoastLeague, orangeIcon), "South Coast League"],
	[WesternBaseballLeagueLayer 			= getLeagueTimeline(WesternBaseballLeague, goldIcon), "Western Baseball League"],
	[UnitedLeagueBaseballLayer 				= getLeagueTimeline(UnitedLeagueBaseball, orangeIcon), "United League Baseball"],
	[GoldenBaseballLeagueLayer 				= getLeagueTimeline(GoldenBaseballLeague, goldIcon), "Golden Baseball League"],
	[NorthAmericanLeagueLayer 				= getLeagueTimeline(NorthAmericanLeague, brownIcon), "North American League"],
	[NortheastLeagueLayer 					= getLeagueTimeline(NortheastLeague, orangeIcon), "Northeast League"],
	
	
	[NoLeagueLayer 							= getLeagueTimeline(NoLeague, NorthwoodsIcon), "noLeague"], //cheap quick hack to update the UI
	

]





getLeagueTimeline(HeartlandLeague, darkblueIcon);
getLeagueTimeline(TexasLouisianaLeague, brownIcon);
getLeagueTimeline(CentralBaseballLeague, brownIcon);
getLeagueTimeline(SoutheasternLeague, aquamarineIcon);
getLeagueTimeline(AllAmericanAssociation, blueIcon);
getLeagueTimeline(NorthernLeague, darkgreenIcon);
getLeagueTimeline(SouthCoastLeague, blueIcon);
getLeagueTimeline(WesternBaseballLeague, violetIcon);
getLeagueTimeline(UnitedLeagueBaseball, greenIcon);
getLeagueTimeline(GoldenBaseballLeague, blackIcon);
getLeagueTimeline(NorthAmericanLeague, brownIcon);
getLeagueTimeline(NortheastLeague, yellowIcon);





function getLeagueLevel(leagueStr) {
	switch (leagueStr) {
		case 	"National League": return timeCheck([["1876", "now", 0]]);
		case 	"American League": return timeCheck([["1900", "1900", 1, "Class A"], ["1901", "now", 0]]);
		case	"Frontier League": return timeCheck([["1993", "now", 2]]);
		case    "Carolina League": return timeCheck([["1945", "1948", 1, "Class C"], ["1949", "1962", 1, "Class B"], ["1963", "1989", 1, "Class A"], ["1990", "2020", 1, "Class A-Advanced"], ["2021", "now", 1, "Class A-"]]);
		case    "Northwoods League": return timeCheck([["1994", "now", 3]]);
		case    "Atlantic League": return timeCheck([["1998", "now", 2]]);
		
		
		
		case    "Illinois State League": return timeCheck([["1947", "1949", 1, "Class D"]]);
		case    "Mississippi-Ohio Valley League": return timeCheck([["1950", "1955", 1, "Class D"]]);
		case    "Midwest League": return timeCheck([["1956", "1962", 1, "Class D"], ["1963", "2020", 1, "Class A"], ["2021", "now", 1, "Class A+"]]);
		
		case    "Pacific Coast League": return timeCheck([	["1903", "1903", 2], 
															["1904", "1911", 1, "Class A"],
															["1912", "1945", 1, "Class AA"],
															["1946", "1951", 1, "Class AAA"],
															["1952", "1957", 1, "Open"],
															["1958", "now", 1, "Class AAA"],
															]);
		case    "International League": return timeCheck([	["1912", "1945", 1, "Class AA"],
															["1946", "now", 1, "Class AAA"],
															]);
		case    "American Association": return timeCheck([	["1882", "1891", 0], 
															["1903", "1911", 1, "Class A"],
															["1912", "1945", 1, "Class AA"],
															["1946", "1962", 1, "Class AAA"],
															["1969", "1997", 1, "Class AAA"],
															["2006", "now", 2],
															]);
		}
	return 1
}	


var overlaysTree1 = 	{
    label: 'Leagues',
    selectAllCheckbox: 'Un/select all',
    children: [  {
			label: 'leagues but again',
            selectAllCheckbox: true,
            children: [] }     ]
			}





for (let i = 0; i < leagueLayerArray.length; i++) {
	leagueLayerArray[i][0].addTo(map);
	timelineControl.addTimelines(leagueLayerArray[i][0]);
	
	
} 

// L.layerGroup(leagueLayerArray);
//consolidatedLeagueLayers.addTo(map);
//timelineControl.addTimelines(consolidatedLeagueLayers);


//consolidatedLeagueLayers.on('change', function() {console.log("test")})




var baseTree = {
	children: [
        {label: "Light Mode", layer: CartoDB_LightMatter},
		{label: "Dark Mode", layer: CartoDB_DarkMatter},]}



function rebuildLeagueUIList() {                //whenever I need to rebuild the UI list
	var overlaysTree2 = 	{						//create an empty overlaysTree
		label: 'Leagues',
		selectAllCheckbox: 'Un/select all',
		children: [  
				{ label: 'Major Leagues', selectAllCheckbox: true, children: [] },
				{ label: 'Minor Leagues', selectAllCheckbox: true, children: [] },
				{ label: 'Independent', selectAllCheckbox: true, children: [] },
				{ label: 'Collegiate Summer', selectAllCheckbox: true, children: [] },		
				{ label: 'Sir-Not-Appearing-At-This-Time', selectAllCheckbox: true, collapsed: true, children: [] },					
				]
				}						
	LeagueLayerTree.remove();                   //remove the old one from the map
	if (((cleanDates("1890", "start")) <= timelineControl.time) && ((cleanDates("1901", "end")) >= timelineControl.time)) {
		
		overlaysTree2.children[1].children.push(
			{ label: 'Class A', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class B', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class C', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class D', selectAllCheckbox: true, children: [] },
			{ label: 'Class E', selectAllCheckbox: true, children: [] },
			{ label: 'Class F', selectAllCheckbox: true, children: [] },			)
	}
	if (((cleanDates("1902", "start")) <= timelineControl.time) && ((cleanDates("1911", "end")) >= timelineControl.time)) {
		
		overlaysTree2.children[1].children.push(
			{ label: 'Class A', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class B', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class C', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class D', selectAllCheckbox: true, children: [] }, )
	}
	if (((cleanDates("1912", "start")) <= timelineControl.time) && ((cleanDates("1935", "end")) >= timelineControl.time)) {
		
		overlaysTree2.children[1].children.push(
			{ label: 'Class AA', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class A', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class B', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class C', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class D', selectAllCheckbox: true, children: [] }, )
	}
	if (((cleanDates("1936", "start")) <= timelineControl.time) && ((cleanDates("1936", "end")) >= timelineControl.time)) {
		
		overlaysTree2.children[1].children.push(
			{ label: 'Class AA', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class A1', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class A', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class B', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class C', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class D', selectAllCheckbox: true, children: [] }, )
	}
	if (((cleanDates("1937", "start")) <= timelineControl.time) && ((cleanDates("1945", "end")) >= timelineControl.time)) {
		
		overlaysTree2.children[1].children.push(
			{ label: 'Class AA', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class A1', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class A', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class B', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class C', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class D', selectAllCheckbox: true, children: [] },
			{ label: 'Class E', selectAllCheckbox: true, children: [] },			)
	}
	if (((cleanDates("1946", "start")) <= timelineControl.time) && ((cleanDates("1951", "end")) >= timelineControl.time)) {
		
		overlaysTree2.children[1].children.push(
			{ label: 'Class AAA', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class AA', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class A', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class B', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class C', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class D', selectAllCheckbox: true, children: [] },			)
	}
	if (((cleanDates("1952", "start")) <= timelineControl.time) && ((cleanDates("1957", "end")) >= timelineControl.time)) {
		
		overlaysTree2.children[1].children.push(
			{ label: 'Open', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class AAA', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class AA', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class A', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class B', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class C', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class D', selectAllCheckbox: true, children: [] },			)
	}
	if (((cleanDates("1958", "start")) <= timelineControl.time) && ((cleanDates("1962", "end")) >= timelineControl.time)) {
		
		overlaysTree2.children[1].children.push(
			{ label: 'Class AAA', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class AA', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class A', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class B', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class C', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class D', selectAllCheckbox: true, children: [] },			)
	}
	if (((cleanDates("1963", "start")) <= timelineControl.time) && ((cleanDates("1964", "end")) >= timelineControl.time)) {
		
		overlaysTree2.children[1].children.push(
			{ label: 'Class AAA', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class AA', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class A', selectAllCheckbox: true, children: [] }, 
			{ label: 'Rookie', selectAllCheckbox: true, children: [] }, 			)
	}
	if (((cleanDates("1965", "start")) <= timelineControl.time) && ((cleanDates("1989", "end")) >= timelineControl.time)) {
		
		overlaysTree2.children[1].children.push(
			{ label: 'Class AAA', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class AA', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class A', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class A-Short Season', selectAllCheckbox: true, children: [] }, 
			{ label: 'Rookie', selectAllCheckbox: true, children: [] }, 			)
	}
	if (((cleanDates("1990", "start")) <= timelineControl.time) && ((cleanDates("1990", "end")) >= timelineControl.time)) {
		
		overlaysTree2.children[1].children.push(
			{ label: 'Class AAA', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class AA', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class A-Advanced', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class A', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class A-Short Season', selectAllCheckbox: true, children: [] }, 
			{ label: 'Rookie', selectAllCheckbox: true, children: [] }, 			)
	}
	if (((cleanDates("1991", "start")) <= timelineControl.time) && ((cleanDates("2020", "end")) >= timelineControl.time)) {
		
		overlaysTree2.children[1].children.push(
			{ label: 'Class AAA', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class AA', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class A-Advanced', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class A', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class A-Short Season', selectAllCheckbox: true, children: [] }, 
			{ label: 'Rookie-Advanced', selectAllCheckbox: true, children: [] }, 
			{ label: 'Rookie', selectAllCheckbox: true, children: [] }, 			)
	}
	if (((cleanDates("2021", "start")) <= timelineControl.time) && ((cleanDates("now", "end")) >= timelineControl.time)) {
		
		overlaysTree2.children[1].children.push(
			{ label: 'Class AAA', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class AA', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class A+', selectAllCheckbox: true, children: [] }, 
			{ label: 'Class A-', selectAllCheckbox: true, children: [] }, 
			{ label: 'Rookie', selectAllCheckbox: true, children: [] }, 			)
	}
	
	for (let i = 0; i < leagueLayerArray.length; i++) { //iterate thru leagueLayerArray, which contains all the leagueLayers
		leagueName = leagueLayerArray[i][1];
		leagueLevelNum = getLeagueLevel(leagueName)[0];
		subLeagueName = (getLeagueLevel(leagueName)[1]);
		subLeagueNum = null
		if (subLeagueName != null) {
		for (let j = 0; j < overlaysTree2.children[1].children.length; j++) {
			//console.log(j.label);
			if (subLeagueName == overlaysTree2.children[1].children[j].label) {subLeagueNum = j}} } //do not think about this again, ever
		if (leagueLevelNum <= 4) {
			if (subLeagueNum != null) {
			overlaysTree2.children[1].children[subLeagueNum].children.push({label:leagueLayerArray[i][1], layer:leagueLayerArray[i][0]})
			}
			else {
			overlaysTree2.children[leagueLevelNum].children.push({label:leagueLayerArray[i][1], layer:leagueLayerArray[i][0]})
			}
		}}
		
	//console.log(overlaysTree);
	LeagueLayerTree = L.control.layers.tree(baseTree, overlaysTree2, null)
	LeagueLayerTree.addTo(map);
	
}


					
						
						
function timeCheck(timeArray) {
for (let j = 0; j < timeArray.length; j++) {
	if (((cleanDates(timeArray[j][0], "start")) <= timelineControl.time) && ((cleanDates(timeArray[j][1], "end")) >= timelineControl.time)) {
		if (timeArray[j].length == 4 )
			{ return [timeArray[j][2], timeArray[j][3]]}
		return [timeArray[j][2], null]}
	
	}	


return [4, null];			//if it doesn't pass any of the checks then it doesn't exist 	
}


function getArrayNumOfLeagueLevel (leagueLvlStr) {
	console.log(overlaysTree2);
	for (let j = 0; j < overlaysTree2.children[1].children.length; j++) {
		if (leagueLvlStr == j.label) {return j}}}
		

	

//these are camelcased and refer to the ARRAY
//lowercase refers to the JSON file
getLeagueTimeline(NationalLeague, NLIcon); 
getLeagueTimeline(AmericanLeague, ALIcon);
getLeagueTimeline(InternationalLeague, redIcon);
getLeagueTimeline(InternationalAssociation, pinkIcon);
getLeagueTimeline(AmericanAssociation, orangeIcon);
getLeagueTimeline(WesternLeague, greenIcon);
getLeagueTimeline(EasternLeague, goldIcon);
getLeagueTimeline(NationalAssociation, blueIcon);
getLeagueTimeline(NationalBaseBallAssociation, yellowIcon);
getLeagueTimeline(InterstateAssociation, violetIcon);	
getLeagueTimeline(PacificCoastLeague, goldIcon);	
getLeagueTimeline(NorthwesternLeague, darkgreenIcon);	
getLeagueTimeline(TexasLeague, pinkIcon);	
getLeagueTimeline(AlabamaTennesseeLeague, orangeIcon);
getLeagueTimeline(PacificCoastInternationalLeague, aquamarineIcon);		
getLeagueTimeline(IllinoisStateLeague, greyIcon);	
getLeagueTimeline(MississippiOhioValleyLeague, greyIcon);	
getLeagueTimeline(MidwestLeague, greyIcon);	
getLeagueTimeline(IllinoisIndianaIowaLeague, violetIcon);		
getLeagueTimeline(SouthAtlanticLeague, violetIcon);
getLeagueTimeline(PlayersLeague, blackIcon);
getLeagueTimeline(CentralLeague, blueIcon);
//getLeagueTimeline(CarolinaLeague, brightorangeIcon);
getLeagueTimeline(AppalachianLeague, pinkIcon);
getLeagueTimeline(FrontierLeague, blueIcon);
getLeagueTimeline(ContinentalBaseballLeague, brightorangeIcon);



getLeagueTimeline(NorthwoodsLeague, yellowIcon);



timelineControl.addTo(map);
timelineControl.setTime(cleanDates("now", "end"));




</script> </body> </html>